{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\milos.mihajlovic\\\\source\\\\repos\\\\CASHREGISTER\\\\CashRegister-Frontend\\\\src\\\\pages\\\\HomePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport BillForm from \"../components/Bill/BillForm\";\nimport { uiActions } from \"../store/uiSlice\";\nimport ProductForm from \"../components/Product/ProductForm\";\nimport \"../index.css\";\nimport AvailableMeals from \"../components/Meals/AvailableMeals\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction HomePage() {\n  _s();\n\n  const dispatch = useDispatch();\n  const displayBillForm = useSelector(state => state.ui.billFormVisible);\n  const displayProductForm = useSelector(state => state.ui.productFormVisible);\n  const [createdProduct, setCreatedProduct] = useState(false);\n\n  async function AddProduct(productObj) {\n    dispatch(uiActions.showNotification({\n      component: 'ProductForm',\n      status: 'pending',\n      title: 'Sending...',\n      message: 'Adding product!'\n    }));\n    const product = JSON.stringify(productObj);\n    const response = await fetch('https://localhost:7269/api/Product/CreateProducts', {\n      method: 'POST',\n      body: product,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await response.json();\n    console.log(data);\n\n    if (!response.ok) {\n      throw new Error(data.errorMessage);\n    } // wait(500)\n\n\n    dispatch(uiActions.setNotificationToNull());\n  }\n\n  const onOpenBillForm = () => {\n    dispatch(uiActions.showBillForm());\n  };\n\n  const onCreateBill = () => {\n    dispatch(uiActions.showBillButton());\n    dispatch(uiActions.showBillForm());\n  };\n\n  const onOpenProductForm = () => {\n    dispatch(uiActions.showProductForm());\n    setCreatedProduct(prevState => !prevState);\n    console.log(createdProduct);\n    dispatch(uiActions.setNotificationToNull());\n  };\n\n  useEffect(() => {\n    dispatch(uiActions.isNotOnBillsListPage());\n  }, [createdProduct, dispatch, AddProduct]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(AvailableMeals, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), displayBillForm && /*#__PURE__*/_jsxDEV(BillForm, {\n      onClose: onOpenBillForm,\n      onCreate: onCreateBill\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 9\n    }, this), displayProductForm && /*#__PURE__*/_jsxDEV(ProductForm, {\n      onClose: onOpenProductForm,\n      onAdd: AddProduct\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 30\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(HomePage, \"OM/0LjloSqMa7jex44SgMQOwdks=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","BillForm","uiActions","ProductForm","AvailableMeals","HomePage","dispatch","displayBillForm","state","ui","billFormVisible","displayProductForm","productFormVisible","createdProduct","setCreatedProduct","AddProduct","productObj","showNotification","component","status","title","message","product","JSON","stringify","response","fetch","method","body","headers","data","json","console","log","ok","Error","errorMessage","setNotificationToNull","onOpenBillForm","showBillForm","onCreateBill","showBillButton","onOpenProductForm","showProductForm","prevState","isNotOnBillsListPage"],"sources":["C:/Users/milos.mihajlovic/source/repos/CASHREGISTER/CashRegister-Frontend/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport BillForm from \"../components/Bill/BillForm\";\r\nimport { uiActions } from \"../store/uiSlice\";\r\nimport ProductForm from \"../components/Product/ProductForm\";\r\nimport \"../index.css\";\r\nimport AvailableMeals from \"../components/Meals/AvailableMeals\";\r\n\r\nfunction HomePage() {\r\n  const dispatch = useDispatch();\r\n  const displayBillForm = useSelector((state) => state.ui.billFormVisible);\r\n  const displayProductForm = useSelector(\r\n    (state) => state.ui.productFormVisible\r\n  );\r\n  const [createdProduct, setCreatedProduct] = useState(false);\r\n\r\n\r\n  async function AddProduct(productObj) {\r\n      dispatch(\r\n        uiActions.showNotification({\r\n          component:'ProductForm',\r\n          status: 'pending',\r\n          title: 'Sending...',\r\n          message: 'Adding product!',\r\n        })\r\n      );\r\n      const product=JSON.stringify(productObj);\r\n      const response = await fetch('https://localhost:7269/api/Product/CreateProducts', {\r\n        method: 'POST',\r\n        body: product,\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      const data=await response.json()\r\n      console.log(data)\r\n      if (!response.ok) {\r\n        throw new Error(data.errorMessage);\r\n      }\r\n      // wait(500)\r\n      dispatch(uiActions.setNotificationToNull())\r\n    }\r\n\r\n\r\n  const onOpenBillForm = () => {\r\n    dispatch(uiActions.showBillForm());\r\n  };\r\n  const onCreateBill = () => {\r\n    dispatch(uiActions.showBillButton());\r\n    dispatch(uiActions.showBillForm());\r\n  };\r\n\r\n  const onOpenProductForm = () => {\r\n    dispatch(uiActions.showProductForm());\r\n    setCreatedProduct((prevState) => !prevState);\r\n    console.log(createdProduct);\r\n    dispatch(uiActions.setNotificationToNull())\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(uiActions.isNotOnBillsListPage());\r\n  }, [createdProduct, dispatch,AddProduct]);\r\n\r\n  \r\n  return (\r\n    <div>\r\n      <AvailableMeals />\r\n      {displayBillForm && (\r\n        <BillForm onClose={onOpenBillForm} onCreate={onCreateBill} />\r\n      )}\r\n      {displayProductForm && <ProductForm onClose={onOpenProductForm} onAdd={AddProduct}/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}